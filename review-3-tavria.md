# Альтернативный вариант главной страницы bem.info в виде «лендинга»

[Репозиторий проекта](https://github.com/1vank1n/bem-landing)

[Демо](https://1vank1n.github.io/bem-landing/ )

Ревьювер: [Николай Ильченко](https://ru.bem.info/authors/ilchenko-nikolay/ )

## bemjson:
1. Стараться все, что не касается view-ориентированных данных (tag, js) выносить в шаблоны

    ![Не перенесенные поля в шаблоны](https://img-fotki.yandex.ru/get/4425/246231603.0/0_149153_ddf80a5c_orig.png )

2. У многих параграфов повторяются стили и шаблоны для указания тега `p`. Это типичный пример вынесения кода в отдельный блок.
    Я создал блок `paragraph` куда сложил bemhtml шаблон, в котором указывается тег `p` и файл стилей, где описывается повторяющийся `font-weight` и `color`. Далее везде, где нам нужен такой текст, я декларирую этот блока основным, чтобы выполнился именно его шаблон для установки тега `p` и делаю микс к нему нужного мне элемента.

    ```js
    {
        block: 'paragraph',
        mix: { block: 'counter', elem: 'description' },
        content : 'Контент параграфа'
    }
    ```

3. По возможности избегай каскада

    ![БЭМ не любит каскад](https://img-fotki.yandex.ru/get/15524/246231603.0/0_149154_316c1b54_orig.png )

    Лучше примиксовать к используемому блоку элемент родительского блока в котором он находится и для него написать стилей. Если вдруг тег поменяется или добавится еще один p внутри блока, то эти стили тоже применятся, что может поломать твою верстку.

    Лучше сделать так:

    ```js
    {
        block: 'paragraph',
        mix: { block: 's-slice', elem: 'description' },
        content : 'Контент параграфа'
    }
    ```

    ```css
    .s-slice_subscribe .s-slice__description
    {
        margin-top: 0;
    }
    ```

4. По третьему пункту тоже самое касается и социальных ссылок-иконок в футере.

## bemhtml
Шаблоны написаны в простом, поддерживаемом стиле.

1. Cтарайся после return и декларации шаблона не забывать ставить точку с запятой.

    ![Не забывать ставить точки запятые после выражения return](https://img-fotki.yandex.ru/get/15523/246231603.0/0_149155_5a13f7c9_orig.png )

2. Если в шаблоне используются данные из bemjson `this.ctx` более одного раза, лучше ссылку на this.ctx сложить в переменную.

    ```js
    block('counter')(
        content()(function(){
            var ctx = this.ctx;

            return [
                {
                    block : 'heading',
                    mods : { 'level': '3', 'count': 'yes' },
                    content : 0
                },
                {
                    block : 'heading',
                    mods : { 'level': '4' },
                    content : ctx.heading
                },
                {
                    block: 'paragraph',
                    mix: { block: this.block, elem: 'description' },
                    content : ctx.description
                }
            ];
        })
    );
    ```

3. Если блок не содержит контента, поле `content: ''` писать не нужно, шаблонизатор и так создаст тебе html элемент без содержимого.

## deps.js
1. Можно сокращать декларацию зависимостей, например в slider.deps.js сократить до:

    ```js
        shouldDeps : { elems: ['circle', 'nav'] }
    ```

2. Если нужно указать зависимость от элементов, название блока в декларации повторять не нужно:

    Было:

    ```
    { block : 'teamate', elem : 'avatar' },
    { block : 'teamate', elem : 'social' }
    ```

    Стало:

    ```
    { elems: ['avatar', 'social'] }
    ```

## css
1. Старайся использовать один кодстайл, если везде пишешь без скобок, старайся соблюдать это правило. Следи за неиспользуемыми стилями, они занимают лишнее байты в файле стилей. В целом, код написан хорошо.

## Отдельно хотел бы рассмотреть блок слайдер.
[Папка блока на GitHub](https://github.com/1vank1n/bem-landing/tree/b0a8a2b0cb26f7f9a866cf536800934f4521a402/desktop.blocks/slider )

[Измененный блок по моему усмотрению](https://github.com/tavriaforever/bem-landing/tree/master/desktop.blocks/slider )

### css
Блок слайдер представляет из себя типичный реиспользуемый блок из проекта в проект. Все, что он должен знать – с какими слайдами работать и как их переключать, все. Слайдер не должен знать о своей высоте, ширине, верхнем отступе и т.д. При создании блока, ты должен себе гарантировать, что когда ты этот блок вставишь на другую страницу, например в футер, то ничего в футере не поломается и слайдер будет работать, а стили которые нужны слайдеру, выразятся в виде модификаторов или миксов. В данном случае, я добавил модификатор `type_header` и написал стилей для него. Таким образом, если есть возможность сделать блок, которые легко вставляется в любой интерфейс, то лучше это сделать сразу.

### i-bem.js
Если посмотреть в код `dektop.blocks/slider/slider.js`, то можно увидеть ряд важных замечаний.
1. Для того, чтобы было легче поддерживать блок, лучше разносить код на отдельные функции, таким образом будет легче продолжать развивать блок(нет каши в коде) и появится возможность на отдельные небольшие куски кода написать unit тестов, чтобы гарантировать, что после внесенный тобой изменений, твой блок нигде не поломался. Как писать тесты, можно прочитать на сайте в разделе [инструменты](https://ru.bem.info/tools/bem/enb-bem-specs/) и посмотреть пример реализации в [bem-components](https://github.com/bem/bem-components)

2. Чтобы найти элементы можно использовать метод `elem` из API i-bem.js

    Было:

    ```js
    var $slides = this.domElem.find('.slider__slide'),
        ...
    ```

    Стало:

    ```
    // кеширующий метод `elem`, его можно не заносить в переменную
    this.elem('slide')
    ```

3. Чтобы подписываться на DOM события блока и его элемента, в i-bem.js предусмотрел метод bindTo, on используется для подписки на БЭМ события, подробно о событиях можно [почитать здесь](https://ru.bem.info/technology/i-bem/2.3.0/i-bem-js/#events)

4. С i-bem.js нужно еще поразбираться. Хорошие материалы по i-bem.js:

    - Документация к блоку [i-bem](https://ru.bem.info/libs/bem-bl/dev/desktop/i-bem/docs/)
    - Cправочное [руководство](https://ru.bem.info/tutorials/bem-js-tutorial/)

## Вывод

Хочется сказать, что ты большой молодец, в общем принцип построения `БЭМ` проекта ты понял. Ты разобрался c `BEMJSON`, где использовал кастомные поля и блоки из [bem-components](https://github.com/bem/bem-components ), написал пару хороших `BEMHTML` шаблонов – главное, что понял принцип их написания, а также внес в проект интерактивности и заиспользовал модульную систему `ymodules` и оболочку из `i-bem.js`. Отдельный тебе респект за то, что смог разобраться как подключить стороннюю библиотеку [BEM-Grid](https://github.com/verybigman/bem-grid) и по полной ее заиспользовать в проекте, это очень круто. Мне очень понравилась твоя работа, если возьмешь на вооружение те дополнения, о которых я говорил в этом ревью, станешь настоящим `БЭМ` разработчиком. И еще я отправил тебе `PR`, где показал изменения о которых говорил в ревью.

**Pull Request:**
